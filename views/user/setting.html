<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>设置中心</title>
    {{template "head.html" .}}
</head>
<body>
{{template "header.html" .}}

<div id="wrap">
    <div class="container">
        <div class="col-md-3">
            <ul class="nav nav-pills nav-stacked">
                <li role="presentation" class="active">
                    <a href="#userinfo" role="tab" data-toggle="tab">基本信息</a>
                </li>
                <li role="presentation">
                    <a href="#avator" role="tab" data-toggle="tab">头像设置</a>
                </li>
                <li role="presentation">
                    <a href="#account" role="tab" data-toggle="tab">账号设置</a>
                </li>
            </ul>
        </div>


        <div class="col-md-7">
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="userinfo">
                    <h2>基本信息</h2>
                    <hr>
                    <form action="/setting" method="post">
                        <!--标记修改信息还是修改密码-->
                        <input type="hidden" name="do" value="info" >
                        <div class="form-group">
                            <label>User</label>
                            <input class="form-control" value="{{.user.Id}}" readonly>
                        </div>
                        <div class="form-group">
                            <label>Nick</label>
                            <input class="form-control" name="nick" value="{{.user.Nick}}">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input class="form-control" name="email" value="{{.user.Email}}">
                        </div>
                        <div class="form-group">
                            <label>主页</label>
                            <input class="form-control" name="url" value="{{.user.Url}}">
                        </div>
                        <div class="form-group">
                            <label>兴趣</label>
                            <input class="form-control" name="hobby" value="{{.user.Hobby}}">
                        </div>
                        <input type="submit" class="btn btn-default">

                    </form>
                </div>


                <div role="tabpanel" class="tab-pane" id="account">
                    <h2>账号设置</h2>
                    <hr>
                    <form action="/setting" method="post">
                        <!--标记修改信息还是修改密码-->
                        <input type="hidden" name="do" value="pwd" >
                        <div class="form-group">
                            <label>User</label>
                            <input class="form-control" value="{{.user.Id}}" readonly>
                        </div>
                        <div class="form-group">
                            <label>旧密码</label>
                            <input class="form-control" name="pwd1" value="">
                        </div>
                        <div class="form-group">
                            <label>新密码</label>
                            <input class="form-control" name="pwd2" value="">
                        </div>
                        <div class="form-group">
                            <label>重复新密码</label>
                            <input class="form-control" name="pwd3" value="">
                        </div>
                        <input type="submit" class="btn btn-default">
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    $('form').bind('submit', function(){
        var tmp = ajaxSubmit(this, function(){
            if ( tmp.responseJSON.success == true ){
                alert("成功")
                location.reload()
            }else{
                alert(tmp.responseJSON.content)
            }
        })
        return false;
    })
</script>
</body>
</html>